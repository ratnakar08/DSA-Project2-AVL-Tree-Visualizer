/* Base */
* { box-sizing: border-box; }
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at 20% 30%, #283e51, #485563);
  font-family: "Poppins", system-ui, sans-serif;
  color: #fff;
  overflow: hidden;
}

/* Subtle background decoration */
#background {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(circle at 80% 20%, rgba(140, 82, 255, 0.12), transparent 25%),
    radial-gradient(circle at 20% 70%, rgba(0, 255, 200, 0.12), transparent 25%),
    radial-gradient(circle at 50% 40%, rgba(255, 120, 200, 0.08), transparent 30%),
    linear-gradient(135deg, #1e2a78, #111a2e);
  z-index: 0;
  animation: floatGlow 10s ease-in-out infinite alternate;
}

@keyframes floatGlow {
  0% { filter: hue-rotate(0deg); transform: scale(1); }
  100% { filter: hue-rotate(30deg); transform: scale(1.02); }
}


/* Glass container */
.container.glass {
  position: relative;
  z-index: 2;
  width: 92%;
  max-width: 1400px;
  margin: 28px auto;
  padding: 22px;
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(6px);
  box-shadow: 0 8px 30px rgba(0,0,0,0.45);
}

h1 {
  margin: 0 0 18px 0;
  font-size: 28px;
  font-weight: 600;
}

/* Controls */
.controls {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-bottom: 18px;
}
input[type="number"]{
  padding: 10px 14px;
  border-radius: 12px;
  border: none;
  outline: none;
  width: 200px;
  background: rgba(255,255,255,0.08);
  color: #fff;
  text-align: center;
}
button {
  padding: 10px 16px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  background: linear-gradient(135deg,#48c6ef,#6f86d6);
  color: white;
  font-weight: 600;
}
button:active { transform: scale(0.99); }

/* Tree area & layers */
#treeArea {
  position: relative;
  width: 100%;
  height: 68vh;
  overflow: hidden;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent 30%);
  padding: 10px;
}

/* SVG should cover the same area and sit behind nodes */
#treeLines {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  pointer-events: none;
}

/* Node container */
#treeDisplay {
  position: absolute;
  inset: 0;
  z-index: 2;
}

/* Node style */
.node {
  position: absolute;
  width: 50px;
  height: 50px;
  line-height: 50px;
  border-radius: 50%;
  background: linear-gradient(135deg,#43cea2,#185a9d);
  color: white;
  font-weight: 700;
  text-align: center;
  box-shadow: 0 6px 18px rgba(0,0,0,0.45);
  transition: left 700ms cubic-bezier(.2,.9,.3,1), top 700ms cubic-bezier(.2,.9,.3,1), transform 400ms ease;
  transform-origin: center center;
  user-select: none;
}

/* Newly inserted: start smaller/higher; when class removed it animates into position */
.node.new {
  transform: translateY(-120px) scale(0.7);
  opacity: 0.85;
}


/* Rotation highlight */
.node.rotating {
  background: linear-gradient(135deg,#ffb347,#ff7b7b);
  box-shadow: 0 10px 30px rgba(255,160,80,0.35);
}

/* curved line style */
.pathLine {
  stroke: rgba(255,255,255,0.95);
  stroke-width: 2;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: 6;
  animation: dash 0.9s cubic-bezier(.2,.9,.3,1) forwards;
}

@keyframes dash {
  from { stroke-dashoffset: 20; opacity: 0; }
  to { stroke-dashoffset: 0; opacity: 1; }
}

/* responsive tweaks */
@media (max-width: 800px) {
  .node { width: 42px; height: 42px; line-height: 42px; }
  input { width: 140px; }
}
